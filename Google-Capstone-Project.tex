% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\usepackage[margin=1in]{geometry}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same} % disable monospaced font for URLs
\hypersetup{
  pdftitle={Google-Capstone-Project.R},
  pdfauthor={user},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}

\title{Google-Capstone-Project.R}
\author{user}
\date{2022-10-29}

\begin{document}
\maketitle

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#1.ASK}
\CommentTok{\#1.0 Business task}
\CommentTok{\#(a).How do annual members and casual riders use Cyclistic bikes differently?}
\CommentTok{\#(b).Why would casual riders buy Cyclistic annual memberships?}
\CommentTok{\#(c).How can Cyclistic use digital media to influence casual riders to become members?}
\CommentTok{\#1.1 Stakeholders}
\CommentTok{\#stakeholders include the following}
\CommentTok{\#director of marketing}
\CommentTok{\#cyclistic marketing analytics team}
\CommentTok{\#cyclistic exectuive team}
\CommentTok{\#2.PREPARE}
\CommentTok{\#The data is public and has been made available by motivate international inc}
\CommentTok{\#The link.https://divvy{-}tripdata.s3.amazonaws.com/index.html}
\CommentTok{\#.Data is organized in csv files}
\CommentTok{\#.Credibility of data not in question}
\CommentTok{\#.This data has been stripped of all identifying information ensuring its privacy}

\CommentTok{\#3.PROCESS}
\CommentTok{\#.For this project I choose RStudio Desktop in order to prepare, process, clean, analyze and create the visualizations.}
\CommentTok{\#Data review involved the following:}
\CommentTok{\#.Checking column names across all the 12 original files.}
\CommentTok{\#.Checking for missing values.}
\CommentTok{\#.Checking of white spaces.}
\CommentTok{\#.Checking of duplicate records}
\CommentTok{\#3.1 COLLECT \& DATA WRANGLING}
\CommentTok{\#load readr for reading rectangular data}
\CommentTok{\#load lubridate for data wrangling}
\CommentTok{\#load ggplot2 for data visualization}
\CommentTok{\#install packages}
\CommentTok{\#tidyverse for data wrangling}
\CommentTok{\#lubridate for dealing with dates}
\CommentTok{\#ggplot2 for data visualisation}

\FunctionTok{library}\NormalTok{(tidyverse)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## -- Attaching packages --------------------------------------- tidyverse 1.3.1 --
\end{verbatim}

\begin{verbatim}
## v ggplot2 3.3.5     v purrr   0.3.4
## v tibble  3.1.6     v dplyr   1.0.7
## v tidyr   1.1.4     v stringr 1.4.0
## v readr   2.1.1     v forcats 0.5.1
\end{verbatim}

\begin{verbatim}
## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(lubridate)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Attaching package: 'lubridate'
\end{verbatim}

\begin{verbatim}
## The following objects are masked from 'package:base':
## 
##     date, intersect, setdiff, union
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}
\FunctionTok{library}\NormalTok{(dplyr)}
\CommentTok{\#3.1.1.COLLECT  AND READ DATA}
\CommentTok{\#Upload data here}
\NormalTok{b\_Trips\_2019\_Q1}\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"C:/Users/user/Desktop/DATA SETS/BICYCLE DATA/Divvy\_Trips\_2019\_Q1.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 365069 Columns: 12
\end{verbatim}

\begin{verbatim}
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr  (4): from_station_name, to_station_name, usertype, gender
## dbl  (5): trip_id, bikeid, from_station_id, to_station_id, birthyear
## dttm (2): start_time, end_time
\end{verbatim}

\begin{verbatim}
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{b\_Trips\_2019\_Q2}\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"C:/Users/user/Desktop/DATA SETS/BICYCLE DATA/Divvy\_Trips\_2019\_Q2.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 1108163 Columns: 12
\end{verbatim}

\begin{verbatim}
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr  (4): 03 - Rental Start Station Name, 02 - Rental End Station Name, User...
## dbl  (5): 01 - Rental Details Rental ID, 01 - Rental Details Bike ID, 03 - R...
## dttm (2): 01 - Rental Details Local Start Time, 01 - Rental Details Local En...
\end{verbatim}

\begin{verbatim}
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{b\_Trips\_2019\_Q3}\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"C:/Users/user/Desktop/DATA SETS/BICYCLE DATA/Divvy\_Trips\_2019\_Q3.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 1640718 Columns: 12
\end{verbatim}

\begin{verbatim}
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr  (4): from_station_name, to_station_name, usertype, gender
## dbl  (5): trip_id, bikeid, from_station_id, to_station_id, birthyear
## dttm (2): start_time, end_time
\end{verbatim}

\begin{verbatim}
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{b\_Trips\_2019\_Q4}\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"C:/Users/user/Desktop/DATA SETS/BICYCLE DATA/Divvy\_Trips\_2019\_Q4.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 704054 Columns: 12
\end{verbatim}

\begin{verbatim}
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr  (4): from_station_name, to_station_name, usertype, gender
## dbl  (5): trip_id, bikeid, from_station_id, to_station_id, birthyear
## dttm (2): start_time, end_time
\end{verbatim}

\begin{verbatim}
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(b\_Trips\_2019\_Q1)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 12
##    trip_id start_time          end_time            bikeid tripduration
##      <dbl> <dttm>              <dttm>               <dbl>        <dbl>
## 1 21742443 2019-01-01 00:04:37 2019-01-01 00:11:07   2167          390
## 2 21742444 2019-01-01 00:08:13 2019-01-01 00:15:34   4386          441
## 3 21742445 2019-01-01 00:13:23 2019-01-01 00:27:12   1524          829
## 4 21742446 2019-01-01 00:13:45 2019-01-01 00:43:28    252         1783
## 5 21742447 2019-01-01 00:14:52 2019-01-01 00:20:56   1170          364
## 6 21742448 2019-01-01 00:15:33 2019-01-01 00:19:09   2437          216
## # ... with 7 more variables: from_station_id <dbl>, from_station_name <chr>,
## #   to_station_id <dbl>, to_station_name <chr>, usertype <chr>, gender <chr>,
## #   birthyear <dbl>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#3.2.2.WRANGLE DATA AND COMBINE INTO A SINGLE FILE}
\CommentTok{\#Compare column names}
\FunctionTok{colnames}\NormalTok{(b\_Trips\_2019\_Q1)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "trip_id"           "start_time"        "end_time"         
##  [4] "bikeid"            "tripduration"      "from_station_id"  
##  [7] "from_station_name" "to_station_id"     "to_station_name"  
## [10] "usertype"          "gender"            "birthyear"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{colnames}\NormalTok{(b\_Trips\_2019\_Q2)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "01 - Rental Details Rental ID"                   
##  [2] "01 - Rental Details Local Start Time"            
##  [3] "01 - Rental Details Local End Time"              
##  [4] "01 - Rental Details Bike ID"                     
##  [5] "01 - Rental Details Duration In Seconds Uncapped"
##  [6] "03 - Rental Start Station ID"                    
##  [7] "03 - Rental Start Station Name"                  
##  [8] "02 - Rental End Station ID"                      
##  [9] "02 - Rental End Station Name"                    
## [10] "User Type"                                       
## [11] "Member Gender"                                   
## [12] "05 - Member Details Member Birthday Year"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{colnames}\NormalTok{(b\_Trips\_2019\_Q3)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "trip_id"           "start_time"        "end_time"         
##  [4] "bikeid"            "tripduration"      "from_station_id"  
##  [7] "from_station_name" "to_station_id"     "to_station_name"  
## [10] "usertype"          "gender"            "birthyear"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{colnames}\NormalTok{(b\_Trips\_2019\_Q4)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "trip_id"           "start_time"        "end_time"         
##  [4] "bikeid"            "tripduration"      "from_station_id"  
##  [7] "from_station_name" "to_station_id"     "to_station_name"  
## [10] "usertype"          "gender"            "birthyear"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#colnames for dataset Divvy\_Trips\_2019\_Q1,Divvy\_Trips\_2019\_Q3 \& Divvy\_Trips\_2019\_Q4 match}
\CommentTok{\# While the names don\textquotesingle{}t have to be in the same order, they DO need to match perfectly before we can use a command to join them into one file}
\CommentTok{\#Rename columns  to make them consisent}
\NormalTok{b\_Trips\_2019\_Q2 }\OtherTok{\textless{}{-}}\NormalTok{ b\_Trips\_2019\_Q2}\SpecialCharTok{\%\textgreater{}\%}\FunctionTok{rename}\NormalTok{(}\AttributeTok{trip\_id=} \StringTok{"01 {-} Rental Details Rental ID"}
\NormalTok{         ,}\AttributeTok{bikeid =} \StringTok{"01 {-} Rental Details Bike ID"}
\NormalTok{         ,}\AttributeTok{start\_time =}\StringTok{"01 {-} Rental Details Local Start Time"} 
\NormalTok{         ,}\AttributeTok{end\_time =} \StringTok{"01 {-} Rental Details Local End Time"}
\NormalTok{         ,}\AttributeTok{from\_station\_name =}\StringTok{"03 {-} Rental Start Station Name"}
\NormalTok{         ,}\AttributeTok{from\_station\_id =} \StringTok{"03 {-} Rental Start Station ID"}
\NormalTok{         ,}\AttributeTok{to\_station\_name =} \StringTok{"02 {-} Rental End Station Name"}
\NormalTok{         ,}\AttributeTok{to\_station\_id =} \StringTok{"02 {-} Rental End Station ID"}
\NormalTok{         ,}\AttributeTok{usertype=}\StringTok{"User Type"}
\NormalTok{         ,}\AttributeTok{gender=}\StringTok{"Member Gender"}
\NormalTok{         ,}\AttributeTok{birthyear=}\StringTok{"05 {-} Member Details Member Birthday Year"}
\NormalTok{         ,}\AttributeTok{tripduration=}\StringTok{"01 {-} Rental Details Duration In Seconds Uncapped"}\NormalTok{)}

\CommentTok{\#confirm the colnames have changed}
\FunctionTok{colnames}\NormalTok{(b\_Trips\_2019\_Q2)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "trip_id"           "start_time"        "end_time"         
##  [4] "bikeid"            "tripduration"      "from_station_id"  
##  [7] "from_station_name" "to_station_id"     "to_station_name"  
## [10] "usertype"          "gender"            "birthyear"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{table}\NormalTok{(b\_Trips\_2019\_Q2}\SpecialCharTok{$}\NormalTok{Rental.Details.Rental.ID)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: Unknown or uninitialised column: `Rental.Details.Rental.ID`.
\end{verbatim}

\begin{verbatim}
## < table of extent 0 >
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Inspect the dataframes and look for incongruencies}
 
\CommentTok{\# Convert ride\_id and rideable\_type to character so that they can stack correctly}
\NormalTok{b\_Trips\_2019\_Q1}\OtherTok{\textless{}{-}}\NormalTok{ b\_Trips\_2019\_Q1}\SpecialCharTok{\%\textgreater{}\%}
                  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{trip\_id =} \FunctionTok{as.character}\NormalTok{(trip\_id)}
\NormalTok{                  ,}\AttributeTok{bikeid =} \FunctionTok{as.character}\NormalTok{(bikeid)) }

\NormalTok{b\_Trips\_2019\_Q2 }\OtherTok{\textless{}{-}}\NormalTok{ b\_Trips\_2019\_Q2}\SpecialCharTok{\%\textgreater{}\%}
                   \FunctionTok{mutate}\NormalTok{(}\AttributeTok{trip\_id =} \FunctionTok{as.character}\NormalTok{(trip\_id)}
\NormalTok{                  ,}\AttributeTok{bikeid =} \FunctionTok{as.character}\NormalTok{(bikeid)) }

\NormalTok{b\_Trips\_2019\_Q3 }\OtherTok{\textless{}{-}}\NormalTok{  b\_Trips\_2019\_Q3}\SpecialCharTok{\%\textgreater{}\%}
                    \FunctionTok{mutate}\NormalTok{(}\AttributeTok{trip\_id =} \FunctionTok{as.character}\NormalTok{(trip\_id)}
\NormalTok{                   ,}\AttributeTok{bikeid =} \FunctionTok{as.character}\NormalTok{(bikeid)) }

\NormalTok{b\_Trips\_2019\_Q4}\OtherTok{\textless{}{-}}\NormalTok{ b\_Trips\_2019\_Q4}\SpecialCharTok{\%\textgreater{}\%}
                  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{trip\_id =} \FunctionTok{as.character}\NormalTok{(trip\_id)}
\NormalTok{                  ,}\AttributeTok{bikeid =} \FunctionTok{as.character}\NormalTok{(bikeid))}

\CommentTok{\#rbind combines columns that match.}
\CommentTok{\#use bind\_rows instead}
\NormalTok{all\_b\_trips}\OtherTok{\textless{}{-}}\FunctionTok{bind\_rows}\NormalTok{(b\_Trips\_2019\_Q1,b\_Trips\_2019\_Q2,b\_Trips\_2019\_Q3,b\_Trips\_2019\_Q4)}
\CommentTok{\#3.2 Data Validation}
\CommentTok{\# Inspect the new table that has been created}
\FunctionTok{colnames}\NormalTok{(all\_b\_trips)  }\CommentTok{\#List of column names}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "trip_id"           "start_time"        "end_time"         
##  [4] "bikeid"            "tripduration"      "from_station_id"  
##  [7] "from_station_name" "to_station_id"     "to_station_name"  
## [10] "usertype"          "gender"            "birthyear"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{nrow}\NormalTok{(all\_b\_trips)  }\CommentTok{\#How many rows are in data frame?}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 3818004
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{dim}\NormalTok{(all\_b\_trips)  }\CommentTok{\#Dimensions of the data frame?}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 3818004      12
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(all\_b\_trips)  }\CommentTok{\#See the first 6 rows of data frame.  Also tail(all\_trips)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 12
##   trip_id  start_time          end_time            bikeid tripduration
##   <chr>    <dttm>              <dttm>              <chr>         <dbl>
## 1 21742443 2019-01-01 00:04:37 2019-01-01 00:11:07 2167            390
## 2 21742444 2019-01-01 00:08:13 2019-01-01 00:15:34 4386            441
## 3 21742445 2019-01-01 00:13:23 2019-01-01 00:27:12 1524            829
## 4 21742446 2019-01-01 00:13:45 2019-01-01 00:43:28 252            1783
## 5 21742447 2019-01-01 00:14:52 2019-01-01 00:20:56 1170            364
## 6 21742448 2019-01-01 00:15:33 2019-01-01 00:19:09 2437            216
## # ... with 7 more variables: from_station_id <dbl>, from_station_name <chr>,
## #   to_station_id <dbl>, to_station_name <chr>, usertype <chr>, gender <chr>,
## #   birthyear <dbl>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str}\NormalTok{(all\_b\_trips)  }\CommentTok{\#See list of columns and data types (numeric, character, etc)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## spec_tbl_df [3,818,004 x 12] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ trip_id          : chr [1:3818004] "21742443" "21742444" "21742445" "21742446" ...
##  $ start_time       : POSIXct[1:3818004], format: "2019-01-01 00:04:37" "2019-01-01 00:08:13" ...
##  $ end_time         : POSIXct[1:3818004], format: "2019-01-01 00:11:07" "2019-01-01 00:15:34" ...
##  $ bikeid           : chr [1:3818004] "2167" "4386" "1524" "252" ...
##  $ tripduration     : num [1:3818004] 390 441 829 1783 364 ...
##  $ from_station_id  : num [1:3818004] 199 44 15 123 173 98 98 211 150 268 ...
##  $ from_station_name: chr [1:3818004] "Wabash Ave & Grand Ave" "State St & Randolph St" "Racine Ave & 18th St" "California Ave & Milwaukee Ave" ...
##  $ to_station_id    : num [1:3818004] 84 624 644 176 35 49 49 142 148 141 ...
##  $ to_station_name  : chr [1:3818004] "Milwaukee Ave & Grand Ave" "Dearborn St & Van Buren St (*)" "Western Ave & Fillmore St (*)" "Clark St & Elm St" ...
##  $ usertype         : chr [1:3818004] "Subscriber" "Subscriber" "Subscriber" "Subscriber" ...
##  $ gender           : chr [1:3818004] "Male" "Female" "Female" "Male" ...
##  $ birthyear        : num [1:3818004] 1989 1990 1994 1993 1994 ...
##  - attr(*, "spec")=
##   .. cols(
##   ..   trip_id = col_double(),
##   ..   start_time = col_datetime(format = ""),
##   ..   end_time = col_datetime(format = ""),
##   ..   bikeid = col_double(),
##   ..   tripduration = col_number(),
##   ..   from_station_id = col_double(),
##   ..   from_station_name = col_character(),
##   ..   to_station_id = col_double(),
##   ..   to_station_name = col_character(),
##   ..   usertype = col_character(),
##   ..   gender = col_character(),
##   ..   birthyear = col_double()
##   .. )
##  - attr(*, "problems")=<externalptr>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{summary}\NormalTok{(all\_b\_trips)  }\CommentTok{\#Statistical summary of data. Mainly for numerics}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    trip_id            start_time                     end_time                  
##  Length:3818004     Min.   :2019-01-01 00:04:37   Min.   :2019-01-01 00:11:07  
##  Class :character   1st Qu.:2019-05-29 15:49:26   1st Qu.:2019-05-29 16:09:28  
##  Mode  :character   Median :2019-07-25 17:50:54   Median :2019-07-25 18:12:23  
##                     Mean   :2019-07-19 21:47:37   Mean   :2019-07-19 22:11:47  
##                     3rd Qu.:2019-09-15 06:48:05   3rd Qu.:2019-09-15 08:30:13  
##                     Max.   :2019-12-31 23:57:17   Max.   :2020-01-21 13:54:35  
##                                                                                
##     bikeid           tripduration      from_station_id from_station_name 
##  Length:3818004     Min.   :      61   Min.   :  1.0   Length:3818004    
##  Class :character   1st Qu.:     411   1st Qu.: 77.0   Class :character  
##  Mode  :character   Median :     709   Median :174.0   Mode  :character  
##                     Mean   :    1450   Mean   :201.7                     
##                     3rd Qu.:    1283   3rd Qu.:289.0                     
##                     Max.   :10628400   Max.   :673.0                     
##                                                                          
##  to_station_id   to_station_name      usertype            gender         
##  Min.   :  1.0   Length:3818004     Length:3818004     Length:3818004    
##  1st Qu.: 77.0   Class :character   Class :character   Class :character  
##  Median :174.0   Mode  :character   Mode  :character   Mode  :character  
##  Mean   :202.6                                                           
##  3rd Qu.:291.0                                                           
##  Max.   :673.0                                                           
##                                                                          
##    birthyear     
##  Min.   :1759    
##  1st Qu.:1979    
##  Median :1987    
##  Mean   :1984    
##  3rd Qu.:1992    
##  Max.   :2014    
##  NA's   :538751
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# STEP 4: CLEAN UP AND ADD DATA TO PREPARE FOR ANALYSIS}
\CommentTok{\# Inspect the new table that has been created}

\CommentTok{\# There are a few problems we will need to fix:}
\CommentTok{\# (1) In the "member\_casual" column, there are two names for members ("member" and "Subscriber") and two names for casual riders ("Customer" and "casual"). We will need to consolidate that from four to two labels.}
\CommentTok{\# (2) The data can only be aggregated at the ride{-}level, which is too granular. We will want to add some additional columns of data {-}{-} such as day, month, year {-}{-} that provide additional opportunities to aggregate the data.}
\CommentTok{\# (3) We will want to add a calculated field for length of ride since the 2020Q1 data did not have the "tripduration" column. We will add "ride\_length" to the entire dataframe for consistency.}
\CommentTok{\# (4) There are some rides where tripduration shows up as negative, including several hundred rides where Divvy took bikes out of circulation for Quality Control reasons. We will want to delete these rides.}

\CommentTok{\#Converting the start\_time and end\_time columns to}
\NormalTok{all\_b\_trips}\OtherTok{\textless{}{-}}\NormalTok{ all\_b\_trips}\SpecialCharTok{\%\textgreater{}\%}
              \FunctionTok{mutate}\NormalTok{(}\AttributeTok{start\_time=}\FunctionTok{as.POSIXlt}\NormalTok{(start\_time))}
\NormalTok{all\_b\_trips}\OtherTok{\textless{}{-}}\NormalTok{ all\_b\_trips}\SpecialCharTok{\%\textgreater{}\%}
              \FunctionTok{mutate}\NormalTok{(}\AttributeTok{end\_time=}\FunctionTok{as.POSIXlt}\NormalTok{(end\_time))}

\CommentTok{\# Add columns that list the date, month, day, and year of each ride}
\CommentTok{\# This will allow us to aggregate ride data for each month, day, or year ... before completing these operations we could only aggregate at the ride level}
\CommentTok{\# more on date formats in R found at that link}
\NormalTok{all\_b\_trips}\SpecialCharTok{$}\NormalTok{date }\OtherTok{\textless{}{-}} \FunctionTok{as.Date}\NormalTok{(all\_b\_trips}\SpecialCharTok{$}\NormalTok{start\_time) }\CommentTok{\#The default format is yyyy{-}mm{-}dd}
\NormalTok{all\_b\_trips}\SpecialCharTok{$}\NormalTok{month }\OtherTok{\textless{}{-}} \FunctionTok{format}\NormalTok{(}\FunctionTok{as.Date}\NormalTok{(all\_b\_trips}\SpecialCharTok{$}\NormalTok{date), }\StringTok{"\%m"}\NormalTok{)}
\NormalTok{all\_b\_trips}\SpecialCharTok{$}\NormalTok{day }\OtherTok{\textless{}{-}} \FunctionTok{format}\NormalTok{(}\FunctionTok{as.Date}\NormalTok{(all\_b\_trips}\SpecialCharTok{$}\NormalTok{date), }\StringTok{"\%d"}\NormalTok{)}
\NormalTok{all\_b\_trips}\SpecialCharTok{$}\NormalTok{year }\OtherTok{\textless{}{-}} \FunctionTok{format}\NormalTok{(}\FunctionTok{as.Date}\NormalTok{(all\_b\_trips}\SpecialCharTok{$}\NormalTok{date), }\StringTok{"\%Y"}\NormalTok{)}
\NormalTok{all\_b\_trips}\SpecialCharTok{$}\NormalTok{day\_of\_week }\OtherTok{\textless{}{-}} \FunctionTok{format}\NormalTok{(}\FunctionTok{as.Date}\NormalTok{(all\_b\_trips}\SpecialCharTok{$}\NormalTok{date), }\StringTok{"\%A"}\NormalTok{)}
\CommentTok{\# Add a "ride\_length" calculation to all\_trips (in seconds)}
\CommentTok{\# https://stat.ethz.ch/R{-}manual/R{-}devel/library/base/html/difftime.html}
\NormalTok{all\_b\_trips}\SpecialCharTok{$}\NormalTok{ride\_length }\OtherTok{\textless{}{-}} \FunctionTok{difftime}\NormalTok{(all\_b\_trips}\SpecialCharTok{$}\NormalTok{end\_time,all\_b\_trips}\SpecialCharTok{$}\NormalTok{start\_time)}

\CommentTok{\# Remove "bad" data}
\CommentTok{\# The dataframe includes a few hundred entries when bikes were taken out of docks and checked for quality by Divvy or ride\_length was negative}
\CommentTok{\#Check for missing values}
\FunctionTok{colSums}\NormalTok{(}\FunctionTok{is.na}\NormalTok{(all\_b\_trips))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##           trip_id        start_time          end_time            bikeid 
##                 0                 0                 0                 0 
##      tripduration   from_station_id from_station_name     to_station_id 
##                 0                 0                 0                 0 
##   to_station_name          usertype            gender         birthyear 
##                 0                 0            559206            538751 
##              date             month               day              year 
##                 0                 0                 0                 0 
##       day_of_week       ride_length 
##                 0                 0
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#check for duplicates}
\FunctionTok{distinct}\NormalTok{(all\_b\_trips)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 3,818,004 x 18
##    trip_id  start_time          end_time            bikeid tripduration
##    <chr>    <dttm>              <dttm>              <chr>         <dbl>
##  1 21742443 2019-01-01 00:04:37 2019-01-01 00:11:07 2167            390
##  2 21742444 2019-01-01 00:08:13 2019-01-01 00:15:34 4386            441
##  3 21742445 2019-01-01 00:13:23 2019-01-01 00:27:12 1524            829
##  4 21742446 2019-01-01 00:13:45 2019-01-01 00:43:28 252            1783
##  5 21742447 2019-01-01 00:14:52 2019-01-01 00:20:56 1170            364
##  6 21742448 2019-01-01 00:15:33 2019-01-01 00:19:09 2437            216
##  7 21742449 2019-01-01 00:16:06 2019-01-01 00:19:03 2708            177
##  8 21742450 2019-01-01 00:18:41 2019-01-01 00:20:21 2796            100
##  9 21742451 2019-01-01 00:18:43 2019-01-01 00:47:30 6205           1727
## 10 21742452 2019-01-01 00:19:18 2019-01-01 00:24:54 3939            336
## # ... with 3,817,994 more rows, and 13 more variables: from_station_id <dbl>,
## #   from_station_name <chr>, to_station_id <dbl>, to_station_name <chr>,
## #   usertype <chr>, gender <chr>, birthyear <dbl>, date <date>, month <chr>,
## #   day <chr>, year <chr>, day_of_week <chr>, ride_length <drtn>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#View column data types}
\FunctionTok{str}\NormalTok{(all\_b\_trips)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## spec_tbl_df [3,818,004 x 18] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ trip_id          : chr [1:3818004] "21742443" "21742444" "21742445" "21742446" ...
##  $ start_time       : POSIXlt[1:3818004], format: "2019-01-01 00:04:37" "2019-01-01 00:08:13" ...
##  $ end_time         : POSIXlt[1:3818004], format: "2019-01-01 00:11:07" "2019-01-01 00:15:34" ...
##  $ bikeid           : chr [1:3818004] "2167" "4386" "1524" "252" ...
##  $ tripduration     : num [1:3818004] 390 441 829 1783 364 ...
##  $ from_station_id  : num [1:3818004] 199 44 15 123 173 98 98 211 150 268 ...
##  $ from_station_name: chr [1:3818004] "Wabash Ave & Grand Ave" "State St & Randolph St" "Racine Ave & 18th St" "California Ave & Milwaukee Ave" ...
##  $ to_station_id    : num [1:3818004] 84 624 644 176 35 49 49 142 148 141 ...
##  $ to_station_name  : chr [1:3818004] "Milwaukee Ave & Grand Ave" "Dearborn St & Van Buren St (*)" "Western Ave & Fillmore St (*)" "Clark St & Elm St" ...
##  $ usertype         : chr [1:3818004] "Subscriber" "Subscriber" "Subscriber" "Subscriber" ...
##  $ gender           : chr [1:3818004] "Male" "Female" "Female" "Male" ...
##  $ birthyear        : num [1:3818004] 1989 1990 1994 1993 1994 ...
##  $ date             : Date[1:3818004], format: "2019-01-01" "2019-01-01" ...
##  $ month            : chr [1:3818004] "01" "01" "01" "01" ...
##  $ day              : chr [1:3818004] "01" "01" "01" "01" ...
##  $ year             : chr [1:3818004] "2019" "2019" "2019" "2019" ...
##  $ day_of_week      : chr [1:3818004] "Tuesday" "Tuesday" "Tuesday" "Tuesday" ...
##  $ ride_length      : 'difftime' num [1:3818004] 6.5 7.35 13.8166666666667 29.7166666666667 ...
##   ..- attr(*, "units")= chr "mins"
##  - attr(*, "spec")=
##   .. cols(
##   ..   trip_id = col_double(),
##   ..   start_time = col_datetime(format = ""),
##   ..   end_time = col_datetime(format = ""),
##   ..   bikeid = col_double(),
##   ..   tripduration = col_number(),
##   ..   from_station_id = col_double(),
##   ..   from_station_name = col_character(),
##   ..   to_station_id = col_double(),
##   ..   to_station_name = col_character(),
##   ..   usertype = col_character(),
##   ..   gender = col_character(),
##   ..   birthyear = col_double()
##   .. )
##  - attr(*, "problems")=<externalptr>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# 4: CONDUCT DESCRIPTIVE ANALYSIS}
\CommentTok{\#=====================================}
\CommentTok{\# Descriptive analysis on ride\_length (all figures in seconds)}
\FunctionTok{mean}\NormalTok{(all\_b\_trips}\SpecialCharTok{$}\NormalTok{ride\_length) }\CommentTok{\#straight average (total ride length / rides)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Time difference of 24.17419 mins
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(all\_b\_trips}\SpecialCharTok{$}\NormalTok{ride\_length) }\CommentTok{\#midpoint number in the ascending array of ride lengths}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Time difference of 11.81667 mins
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{max}\NormalTok{(all\_b\_trips}\SpecialCharTok{$}\NormalTok{ride\_length) }\CommentTok{\#longest ride}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Time difference of 177200.4 mins
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{min}\NormalTok{(all\_b\_trips}\SpecialCharTok{$}\NormalTok{ride\_length) }\CommentTok{\#shortest ride}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Time difference of -56.36667 mins
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# You can condense the four lines above to one line using summary() on the specific attribute}
\FunctionTok{summary}\NormalTok{(all\_b\_trips}\SpecialCharTok{$}\NormalTok{ride\_length)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Length    Class     Mode 
##  3818004 difftime  numeric
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Compare members and casual users}
\FunctionTok{aggregate}\NormalTok{(all\_b\_trips}\SpecialCharTok{$}\NormalTok{ride\_length }\SpecialCharTok{\textasciitilde{}}\NormalTok{ all\_b\_trips}\SpecialCharTok{$}\NormalTok{usertype, }\AttributeTok{FUN =}\NormalTok{ mean)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   all_b_trips$usertype all_b_trips$ride_length
## 1             Customer           57.01734 mins
## 2           Subscriber           14.32765 mins
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{aggregate}\NormalTok{(all\_b\_trips}\SpecialCharTok{$}\NormalTok{ride\_length }\SpecialCharTok{\textasciitilde{}}\NormalTok{ all\_b\_trips}\SpecialCharTok{$}\NormalTok{usertype, }\AttributeTok{FUN =}\NormalTok{ median)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   all_b_trips$usertype all_b_trips$ride_length
## 1             Customer           25.83333 mins
## 2           Subscriber            9.80000 mins
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{aggregate}\NormalTok{(all\_b\_trips}\SpecialCharTok{$}\NormalTok{ride\_length }\SpecialCharTok{\textasciitilde{}}\NormalTok{ all\_b\_trips}\SpecialCharTok{$}\NormalTok{usertype, }\AttributeTok{FUN =}\NormalTok{ max)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   all_b_trips$usertype all_b_trips$ride_length
## 1             Customer           177200.4 mins
## 2           Subscriber           150943.9 mins
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{aggregate}\NormalTok{(all\_b\_trips}\SpecialCharTok{$}\NormalTok{ride\_length }\SpecialCharTok{\textasciitilde{}}\NormalTok{ all\_b\_trips}\SpecialCharTok{$}\NormalTok{usertype, }\AttributeTok{FUN =}\NormalTok{ min)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   all_b_trips$usertype all_b_trips$ride_length
## 1             Customer          -48.28333 mins
## 2           Subscriber          -56.36667 mins
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# See the average ride time by each day for members vs casual users}
\FunctionTok{aggregate}\NormalTok{(all\_b\_trips}\SpecialCharTok{$}\NormalTok{ride\_length }\SpecialCharTok{\textasciitilde{}}\NormalTok{ all\_b\_trips}\SpecialCharTok{$}\NormalTok{usertype }\SpecialCharTok{+}\NormalTok{ all\_b\_trips}\SpecialCharTok{$}\NormalTok{day\_of\_week, }\AttributeTok{FUN =}\NormalTok{ mean)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    all_b_trips$usertype all_b_trips$day_of_week all_b_trips$ride_length
## 1              Customer                  Friday           60.17561 mins
## 2            Subscriber                  Friday           13.89748 mins
## 3              Customer                  Monday           54.49989 mins
## 4            Subscriber                  Monday           14.24928 mins
## 5              Customer                Saturday           54.06111 mins
## 6            Subscriber                Saturday           16.30271 mins
## 7              Customer                  Sunday           56.18169 mins
## 8            Subscriber                  Sunday           15.40119 mins
## 9              Customer                Thursday           59.95112 mins
## 10           Subscriber                Thursday           13.77979 mins
## 11             Customer                 Tuesday           57.41328 mins
## 12           Subscriber                 Tuesday           14.15259 mins
## 13             Customer               Wednesday           60.33407 mins
## 14           Subscriber               Wednesday           13.80984 mins
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Notice that the days of the week are out of order. Let\textquotesingle{}s fix that.}
\NormalTok{all\_b\_trips}\SpecialCharTok{$}\NormalTok{day\_of\_week }\OtherTok{\textless{}{-}} \FunctionTok{ordered}\NormalTok{(all\_b\_trips}\SpecialCharTok{$}\NormalTok{day\_of\_week, }\AttributeTok{levels=}\FunctionTok{c}\NormalTok{(}\StringTok{"Sunday"}\NormalTok{,}\StringTok{"Monday"}\NormalTok{,}\StringTok{"Tuesday"}\NormalTok{,}\StringTok{"Wednesday"}\NormalTok{,}\StringTok{"Thursday"}\NormalTok{,}\StringTok{"Friday"}\NormalTok{,}\StringTok{"Saturday"}\NormalTok{))}

\CommentTok{\# Now, let\textquotesingle{}s run the average ride time by each day for members vs casual users}
\FunctionTok{aggregate}\NormalTok{(all\_b\_trips}\SpecialCharTok{$}\NormalTok{ride\_length }\SpecialCharTok{\textasciitilde{}}\NormalTok{ all\_b\_trips}\SpecialCharTok{$}\NormalTok{usertype }\SpecialCharTok{+}\NormalTok{ all\_b\_trips}\SpecialCharTok{$}\NormalTok{day\_of\_week, }\AttributeTok{FUN =}\NormalTok{ mean)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    all_b_trips$usertype all_b_trips$day_of_week all_b_trips$ride_length
## 1              Customer                  Sunday           56.18169 mins
## 2            Subscriber                  Sunday           15.40119 mins
## 3              Customer                  Monday           54.49989 mins
## 4            Subscriber                  Monday           14.24928 mins
## 5              Customer                 Tuesday           57.41328 mins
## 6            Subscriber                 Tuesday           14.15259 mins
## 7              Customer               Wednesday           60.33407 mins
## 8            Subscriber               Wednesday           13.80984 mins
## 9              Customer                Thursday           59.95112 mins
## 10           Subscriber                Thursday           13.77979 mins
## 11             Customer                  Friday           60.17561 mins
## 12           Subscriber                  Friday           13.89748 mins
## 13             Customer                Saturday           54.06111 mins
## 14           Subscriber                Saturday           16.30271 mins
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# analyze ridership data by type and weekday}
\NormalTok{all\_b\_trips }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{weekday =} \FunctionTok{wday}\NormalTok{(start\_time, }\AttributeTok{label =} \ConstantTok{TRUE}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}  \CommentTok{\#creates weekday field using wday()}
  \FunctionTok{group\_by}\NormalTok{(usertype, weekday) }\SpecialCharTok{\%\textgreater{}\%}  \CommentTok{\#groups by usertype and weekday}
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{number\_of\_rides =} \FunctionTok{n}\NormalTok{(),                          }\CommentTok{\#calculates the number of rides and average duration }
  \AttributeTok{average\_duration =} \FunctionTok{mean}\NormalTok{(ride\_length)) }\SpecialCharTok{\%\textgreater{}\%}         \CommentTok{\# calculates the average duration}
  \FunctionTok{arrange}\NormalTok{(usertype, weekday)                                }\CommentTok{\# sorts}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## `summarise()` has grouped output by 'usertype'. You can override using the `.groups` argument.
\end{verbatim}

\begin{verbatim}
## # A tibble: 14 x 4
## # Groups:   usertype [2]
##    usertype   weekday number_of_rides average_duration
##    <chr>      <ord>             <int> <drtn>          
##  1 Customer   Sun              170179 56.18169 mins   
##  2 Customer   Mon              101489 54.49989 mins   
##  3 Customer   Tue               88655 57.41328 mins   
##  4 Customer   Wed               89745 60.33407 mins   
##  5 Customer   Thu              101372 59.95112 mins   
##  6 Customer   Fri              121141 60.17561 mins   
##  7 Customer   Sat              208056 54.06111 mins   
##  8 Subscriber Sun              256241 15.40119 mins   
##  9 Subscriber Mon              458780 14.24928 mins   
## 10 Subscriber Tue              497025 14.15259 mins   
## 11 Subscriber Wed              494277 13.80984 mins   
## 12 Subscriber Thu              486915 13.77979 mins   
## 13 Subscriber Fri              456966 13.89748 mins   
## 14 Subscriber Sat              287163 16.30271 mins
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Let\textquotesingle{}s visualize the number of rides by rider type}
\NormalTok{all\_b\_trips }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{weekday =} \FunctionTok{wday}\NormalTok{(start\_time, }\AttributeTok{label =} \ConstantTok{TRUE}\NormalTok{))}\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{group\_by}\NormalTok{(usertype, weekday) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{number\_of\_rides =} \FunctionTok{n}\NormalTok{()}
\NormalTok{ ,}\AttributeTok{average\_duration =} \FunctionTok{mean}\NormalTok{(ride\_length))}\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{arrange}\NormalTok{(usertype, weekday)  }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ weekday, }\AttributeTok{y =}\NormalTok{ number\_of\_rides, }\AttributeTok{fill =}\NormalTok{ usertype)) }\SpecialCharTok{+}
  \FunctionTok{geom\_col}\NormalTok{(}\AttributeTok{position =} \StringTok{"dodge"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## `summarise()` has grouped output by 'usertype'. You can override using the `.groups` argument.
\end{verbatim}

\includegraphics{Google-Capstone-Project_files/figure-latex/unnamed-chunk-1-1.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Let\textquotesingle{}s create a visualization for average duration}
\NormalTok{all\_b\_trips }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{weekday =} \FunctionTok{wday}\NormalTok{(start\_time, }\AttributeTok{label =} \ConstantTok{TRUE}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{group\_by}\NormalTok{(usertype, weekday) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{number\_of\_rides =} \FunctionTok{n}\NormalTok{()}
\NormalTok{  ,}\AttributeTok{average\_duration =} \FunctionTok{mean}\NormalTok{(ride\_length)) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{arrange}\NormalTok{(usertype, weekday)  }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ weekday, }\AttributeTok{y =}\NormalTok{ average\_duration, }\AttributeTok{fill =}\NormalTok{ usertype)) }\SpecialCharTok{+}
  \FunctionTok{geom\_col}\NormalTok{(}\AttributeTok{position =} \StringTok{"dodge"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## `summarise()` has grouped output by 'usertype'. You can override using the `.groups` argument.
\end{verbatim}

\begin{verbatim}
## Don't know how to automatically pick scale for object of type difftime. Defaulting to continuous.
\end{verbatim}

\includegraphics{Google-Capstone-Project_files/figure-latex/unnamed-chunk-1-2.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#=================================================}
\CommentTok{\# 5: EXPORT SUMMARY FILE FOR FURTHER ANALYSIS}
\CommentTok{\#=================================================}
\CommentTok{\# Create a csv file that we will visualize in Excel, Tableau, or my presentation software}
\CommentTok{\# N.B.: This file location is for a Mac. If you are working on a PC, change the file location accordingly (most likely "C:\textbackslash{}Users\textbackslash{}YOUR\_USERNAME\textbackslash{}Desktop\textbackslash{}...") to export the data. You can read more here: https://datatofish.com/export{-}dataframe{-}to{-}csv{-}in{-}r/}
\NormalTok{counts }\OtherTok{\textless{}{-}} \FunctionTok{aggregate}\NormalTok{(all\_b\_trips}\SpecialCharTok{$}\NormalTok{ride\_length }\SpecialCharTok{\textasciitilde{}}\NormalTok{ all\_b\_trips}\SpecialCharTok{$}\NormalTok{usertype }\SpecialCharTok{+}\NormalTok{ all\_b\_trips}\SpecialCharTok{$}\NormalTok{day\_of\_week, }\AttributeTok{FUN =}\NormalTok{ mean)}
\FunctionTok{write.csv}\NormalTok{(counts,}\StringTok{\textquotesingle{}C:}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{Users}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{user}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{Desktop}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{RSTUDIO}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{avg\_ride\_length.csv\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}


\end{document}
